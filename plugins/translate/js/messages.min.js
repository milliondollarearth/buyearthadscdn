+function(b){var a=function(){var c=this;this.$form=null;this.tableToolbar=null;this.fromInput=null;this.fromHeader=null;this.toInput=null;this.toHeader=null;this.tableElement=null;this.hideTranslated=false;this.emptyDataSet=null;this.dataSet=null;b(document).on("change","#hideTranslated",function(){c.toggleTranslated(b(this).is(":checked"));c.refreshTable()});b(document).on("keyup",".control-table input.string-input",function(d){c.onApplyValue(d)});this.toggleTranslated=function(d){this.hideTranslated=d;this.setTitleContents()};this.setToolbarContents=function(e){if(e){this.tableToolbar=b(e)}if(!this.tableElement){return}var d=b(".toolbar",this.tableElement);if(d.hasClass("message-buttons-added")){return}d.addClass("message-buttons-added");d.prepend(Mustache.render(this.tableToolbar.html()))};this.setTitleContents=function(f,e){if(f){this.fromHeader=b(f)}if(e){this.toHeader=b(e)}if(!this.tableElement){return}var d=b("table.headers th",this.tableElement);d.eq(0).html(this.fromHeader.html());d.eq(1).html(Mustache.render(this.toHeader.html(),{hideTranslated:this.hideTranslated}))};this.setTableElement=function(d){this.tableElement=b(d);this.$form=b("#messagesForm");this.fromInput=this.$form.find("input[name=locale_from]");this.toInput=this.$form.find("input[name=locale_to]");this.tableElement.one("oc.tableUpdateData",b.proxy(this.updateTableData,this))};this.onApplyValue=function(e){if(e.keyCode==13){var d=b(e.currentTarget).closest("[data-control=table]");if(!d.length){return}var f=d.data("oc.table");if(f){f.setCellValue(b(e.currentTarget).closest("td").get(0),e.currentTarget.value);f.commitEditedRow()}}};this.updateTableData=function(e,d){if(this.hideTranslated&&!d.length){c.toggleTranslated(b(this).is(":checked"));c.refreshTable()}};this.toggleDropdown=function(d){setTimeout(function(){b(d).dropdown("toggle")},1);return false};this.setLanguage=function(d,e){if(d=="to"){this.toInput.val(e)}else{if(d=="from"){this.fromInput.val(e)}}this.refreshGrid();return false};this.swapLanguages=function(){var e=this.fromInput.val(),d=this.toInput.val();this.toggleTranslated(false);this.fromInput.val(d);this.toInput.val(e);this.refreshGrid()};this.refreshGrid=function(){this.$form.request("onRefresh")};this.refreshTable=function(){this.tableElement.table("updateDataTable")}};b.translateMessages=new a}(window.jQuery);